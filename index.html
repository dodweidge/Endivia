<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Test Page / éƒ¨ç½²æµ‹è¯•é¡µ</title>
  <meta name="description" content="ç”¨äºæµ‹è¯•éƒ¨ç½²ã€HTTPSã€ä¸­æ–‡å­—ä½“ã€å“åº”å¼å¸ƒå±€ä¸äº¤äº’çš„å•é¡µHTML" />
  <style>
    :root { color-scheme: light dark; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans SC", "PingFang SC", "Microsoft YaHei", sans-serif;
      line-height: 1.6;
    }
    header {
      padding: 24px 16px;
      border-bottom: 1px solid rgba(128,128,128,.3);
      position: sticky;
      top: 0;
      background: rgba(255,255,255,.85);
      backdrop-filter: blur(8px);
    }
    @media (prefers-color-scheme: dark) {
      header { background: rgba(0,0,0,.6); }
    }
    main { max-width: 920px; margin: 0 auto; padding: 16px; }
    .grid { display: grid; grid-template-columns: 1fr; gap: 16px; }
    @media (min-width: 860px) { .grid { grid-template-columns: 1.2fr .8fr; } }
    .card {
      border: 1px solid rgba(128,128,128,.3);
      border-radius: 12px;
      padding: 16px;
    }
    .row { display: flex; gap: 8px; flex-wrap: wrap; align-items: center; }
    .btn {
      border: 1px solid rgba(128,128,128,.5);
      background: transparent;
      padding: 8px 12px;
      border-radius: 10px;
      cursor: pointer;
    }
    .btn:hover { filter: brightness(1.05); }
    code, pre { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; }
    pre {
      overflow: auto;
      padding: 12px;
      border-radius: 10px;
      border: 1px solid rgba(128,128,128,.3);
    }
    table { width: 100%; border-collapse: collapse; overflow: hidden; border-radius: 10px; }
    th, td { padding: 10px; border-bottom: 1px solid rgba(128,128,128,.25); text-align: left; }
    th { font-weight: 650; }
    .muted { opacity: .75; }
    .pill { display: inline-block; padding: 2px 10px; border-radius: 999px; border: 1px solid rgba(128,128,128,.4); }
    .hr { height: 1px; background: rgba(128,128,128,.25); margin: 16px 0; }
    footer { padding: 24px 16px; border-top: 1px solid rgba(128,128,128,.3); text-align: center; }
    .toast {
      position: fixed;
      right: 16px;
      bottom: 16px;
      padding: 12px 14px;
      border-radius: 12px;
      border: 1px solid rgba(128,128,128,.35);
      background: rgba(0,0,0,.75);
      color: white;
      display: none;
      max-width: min(420px, calc(100vw - 32px));
    }
  </style>
</head>
<body>
  <header>
    <div class="row" style="justify-content: space-between;">
      <div>
        <div style="font-size: 18px; font-weight: 750;">éƒ¨ç½²æµ‹è¯•é¡µ âœ…</div>
        <div class="muted" style="font-size: 13px;">ç”¨äºæµ‹è¯•é™æ€ç«™ç‚¹ã€DNSã€HTTPSã€ç¼“å­˜ä¸ä¸­æ–‡æ¸²æŸ“</div>
      </div>
      <div class="row">
        <span class="pill" id="protocolPill">åè®®ï¼š?</span>
        <span class="pill" id="timePill">æ—¶é—´ï¼š?</span>
      </div>
    </div>
  </header>

  <main>
    <div class="grid">
      <section class="card">
        <h2 style="margin-top: 0;">åŸºç¡€æ£€æŸ¥</h2>
        <ul>
          <li>å½“å‰ URLï¼š<code id="urlText">-</code></li>
          <li>Hostï¼š<code id="hostText">-</code></li>
          <li>User-Agentï¼š<code id="uaText">-</code></li>
          <li>è¯­è¨€ï¼š<code id="langText">-</code></li>
        </ul>

        <div class="hr"></div>

        <h3>äº¤äº’æµ‹è¯•</h3>
        <div class="row">
          <button class="btn" id="btnToast">å¼¹ä¸ªæç¤º</button>
          <button class="btn" id="btnCopy">å¤åˆ¶ä¸€æ®µæ–‡æœ¬</button>
          <button class="btn" id="btnFetch">Fetch /api/pingï¼ˆå¯é€‰ï¼‰</button>
        </div>
        <p class="muted" id="fetchResult" style="margin-bottom: 0;"></p>

        <div class="hr"></div>

        <h3>è¡¨å•ä¸è¾“å…¥</h3>
        <form id="testForm">
          <div class="row">
            <label>å§“åï¼š
              <input name="name" placeholder="fox chen" required />
            </label>
            <label>é‚®ç®±ï¼š
              <input name="email" type="email" placeholder="name@example.com" />
            </label>
          </div>

          <div style="margin-top: 10px;">
            <label>ç•™è¨€ï¼š</label><br />
            <textarea name="msg" rows="4" style="width: 100%;" placeholder="æµ‹è¯•ä¸­æ–‡ã€æ¢è¡Œã€è¡¨æƒ…ç¬¦å·ğŸ™‚"></textarea>
          </div>

          <div class="row" style="margin-top: 10px;">
            <label><input type="checkbox" name="agree" /> æˆ‘åŒæ„è¿™åªæ˜¯æµ‹è¯•</label>
            <button class="btn" type="submit">æäº¤ï¼ˆæœ¬åœ°æ‹¦æˆªï¼‰</button>
          </div>
        </form>

        <div class="hr"></div>

        <h3>ä»£ç å—ï¼ˆæµ‹è¯•ç­‰å®½å­—ä½“/æ»šåŠ¨ï¼‰</h3>
        <pre><code># Nginx ç¤ºä¾‹ï¼ˆä»…ç”¨äºæµ‹è¯•å±•ç¤ºï¼‰
server {
  listen 80;
  server_name example.com www.example.com;

  root /var/www/site;
  index index.html;

  location / {
    try_files $uri $uri/ =404;
  }
}</code></pre>
      </section>

      <aside class="card">
        <h2 style="margin-top: 0;">å¸ƒå±€/èµ„æºæµ‹è¯•</h2>

        <h3>è¡¨æ ¼</h3>
        <table>
          <thead>
            <tr><th>é¡¹ç›®</th><th>çŠ¶æ€</th><th>å¤‡æ³¨</th></tr>
          </thead>
          <tbody>
            <tr><td>DNS è§£æ</td><td>å¾…æ£€æŸ¥</td><td class="muted">A / CNAME æ˜¯å¦æ­£ç¡®</td></tr>
            <tr><td>HTTPS</td><td>å¾…æ£€æŸ¥</td><td class="muted">è¯ä¹¦æ˜¯å¦è‡ªåŠ¨ç­¾å‘</td></tr>
            <tr><td>ç¼“å­˜</td><td>å¾…æ£€æŸ¥</td><td class="muted">åˆ·æ–°æ˜¯å¦æ›´æ–°</td></tr>
          </tbody>
        </table>

        <div class="hr"></div>

        <h3>è¿›åº¦æ¡</h3>
        <label class="muted">æ¨¡æ‹ŸåŠ è½½ï¼š</label>
        <progress id="prog" value="25" max="100" style="width: 100%;"></progress>
        <div class="row" style="margin-top: 8px;">
          <button class="btn" id="btnProg">å¢åŠ  10%</button>
          <span class="muted" id="progText">25%</span>
        </div>

        <div class="hr"></div>

        <h3>å›¾ç‰‡å ä½ï¼ˆä¸ä¾èµ–å¤–ç½‘ï¼‰</h3>
        <svg viewBox="0 0 800 450" width="100%" style="border-radius: 12px; border: 1px solid rgba(128,128,128,.3);">
          <defs>
            <linearGradient id="g" x1="0" x2="1">
              <stop offset="0" stop-color="rgba(128,128,128,.15)"/>
              <stop offset="1" stop-color="rgba(128,128,128,.35)"/>
            </linearGradient>
          </defs>
          <rect width="800" height="450" fill="url(#g)"></rect>
          <text x="50%" y="50%" text-anchor="middle" dominant-baseline="middle"
                font-size="32" fill="rgba(255,255,255,.85)">SVG Placeholder</text>
          <text x="50%" y="58%" text-anchor="middle" dominant-baseline="middle"
                font-size="16" fill="rgba(255,255,255,.75)">ç”¨äºæµ‹è¯•å›¾ç‰‡æ¸²æŸ“ä¸è‡ªé€‚åº”</text>
        </svg>
      </aside>
    </div>

    <div class="card" style="margin-top: 16px;">
      <h2 style="margin-top: 0;">é•¿æ–‡æœ¬æ»šåŠ¨æµ‹è¯•</h2>
      <p class="muted">
        ä¸‹é¢è¿™æ®µç”¨äºæµ‹è¯•ï¼šä¸­æ–‡æ¢è¡Œã€æ®µè½é—´è·ã€ç§»åŠ¨ç«¯æ»šåŠ¨ã€ç²˜æ€§å¤´éƒ¨é®æŒ¡ç­‰ã€‚
      </p>
      <p>
        ç«æ˜Ÿçš„é£å¸¦ç€ç»†ç¢çš„å°˜æ²™ï¼Œè´´ç€åœ°è¡¨æ»‘è¡Œã€‚ä½ å¯ä»¥æŠŠè¿™æ®µå½“ä½œå ä½å†…å®¹ï¼šåœ¨ä¸åŒå±å¹•å®½åº¦ä¸‹ï¼Œ
        è§‚å¯Ÿè¡Œå®½ã€å­—è·ã€æ ‡ç‚¹æŒ¤å‹æ˜¯å¦èˆ’æœï¼›ä¹Ÿå¯ä»¥æµ‹è¯•æµè§ˆå™¨çš„é¡µé¢ç¼©æ”¾ã€æ·±è‰²æ¨¡å¼ã€ä»¥åŠç¼“å­˜åˆ·æ–°ã€‚
      </p>
      <p>
        å¦‚æœä½ åœ¨åšåå‘ä»£ç†æˆ– CDNï¼Œè¯·å¤šæ¬¡åˆ·æ–°å¹¶æ‰“å¼€å¼€å‘è€…å·¥å…·è§‚å¯Ÿï¼šæ˜¯å¦å‘½ä¸­ç¼“å­˜ã€å“åº”å¤´æ˜¯å¦æ­£ç¡®ã€
        é™æ€èµ„æºæ˜¯å¦è¢«å‹ç¼©ï¼ˆgzip/brotliï¼‰ã€ä»¥åŠæ˜¯å¦æœ‰ mixed contentï¼ˆHTTPS ä¸‹åŠ è½½ HTTP èµ„æºï¼‰ã€‚
      </p>
    </div>
  </main>

  <footer class="muted">
    <div>Â© <span id="yearText"></span> Test Page</div>
    <div style="font-size: 12px;">æç¤ºï¼šå¦‚æœä½ éœ€è¦æµ‹è¯•åç«¯ï¼ŒæŠŠ <code>/api/ping</code> è·¯ç”±åœ¨æœåŠ¡å™¨ä¸Šè¿”å› JSON å°±è¡Œã€‚</div>
  </footer>

  <div class="toast" id="toast"></div>

  <script>
    const $ = (id) => document.getElementById(id);

    function showToast(msg) {
      const t = $("toast");
      t.textContent = msg;
      t.style.display = "block";
      clearTimeout(window.__toastTimer);
      window.__toastTimer = setTimeout(() => (t.style.display = "none"), 2400);
    }

    // åŸºç¡€ä¿¡æ¯
    $("urlText").textContent = location.href;
    $("hostText").textContent = location.host || "(file:// æœ¬åœ°æ‰“å¼€)";
    $("uaText").textContent = navigator.userAgent;
    $("langText").textContent = navigator.language;
    $("protocolPill").textContent = "åè®®ï¼š" + location.protocol.replace(":", "").toUpperCase();
    $("timePill").textContent = "æ—¶é—´ï¼š" + new Date().toLocaleString();
    $("yearText").textContent = new Date().getFullYear();

    // Toast
    $("btnToast").addEventListener("click", () => {
      showToast("æç¤ºï¼šé¡µé¢ JS æ­£å¸¸è¿è¡Œ âœ… " + new Date().toLocaleTimeString());
    });

    // Copy
    $("btnCopy").addEventListener("click", async () => {
      const text = "Hello from test.html â€” å¤åˆ¶æˆåŠŸ âœ…";
      try {
        await navigator.clipboard.writeText(text);
        showToast("å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼š " + text);
      } catch (e) {
        showToast("å¤åˆ¶å¤±è´¥ï¼ˆå¯èƒ½é HTTPS æˆ–æƒé™é™åˆ¶ï¼‰ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶ï¼š " + text);
      }
    });

    // Progress
    $("btnProg").addEventListener("click", () => {
      const p = $("prog");
      p.value = Math.min(100, Number(p.value) + 10);
      $("progText").textContent = p.value + "%";
      if (p.value === 100) showToast("è¿›åº¦æ¡åˆ° 100% âœ…");
    });

    // Form
    $("testForm").addEventListener("submit", (e) => {
      e.preventDefault();
      const fd = new FormData(e.target);
      const obj = Object.fromEntries(fd.entries());
      obj.agree = fd.get("agree") === "on";
      showToast("è¡¨å•å·²æ‹¦æˆªï¼ˆæœªæäº¤åˆ°æœåŠ¡å™¨ï¼‰ã€‚æ•°æ®ï¼š" + JSON.stringify(obj));
      console.log("FormData:", obj);
    });

    // Fetch optional
    $("btnFetch").addEventListener("click", async () => {
      $("fetchResult").textContent = "è¯·æ±‚ä¸­...";
      try {
        const r = await fetch("/api/ping", { cache: "no-store" });
        const txt = await r.text();
        $("fetchResult").textContent = "çŠ¶æ€ " + r.status + "ï¼š" + txt.slice(0, 200);
        showToast("Fetch å®Œæˆ âœ…ï¼ˆçœ‹å³ä¾§/æ§åˆ¶å°ï¼‰");
      } catch (e) {
        $("fetchResult").textContent = "è¯·æ±‚å¤±è´¥ï¼šä½ å¯èƒ½æ²¡æœ‰åç«¯ /api/pingï¼ˆè¿™æ˜¯æ­£å¸¸çš„ï¼‰";
        showToast("Fetch å¤±è´¥ï¼ˆä½†é¡µé¢æ­£å¸¸ï¼‰");
      }
    });
  </script>
</body>
</html>

